<!DOCTYPE html>
<html>
<head>
    <title>Keycloak Login</title>
    <script src="https://cdn.jsdelivr.net/npm/keycloak-js@16.1.0/dist/keycloak.js"></script>
</head>
<body>
    <h1>Keycloak Authentication</h1>
     
    <button id="login">Login with Keycloak</button>

    <script>
        const keycloak = Keycloak({ 
            url: 'http://localhost:8080', 
            realm: 'saml', 
            clientId: 'frontend', 
            redirectUri: 'https://lujainsallam1.github.io/saml', 
        });

        let isButtonClicked = false; // إضافة متغير للتحقق من النقر على الزر

        document.getElementById('login').addEventListener('click', () => { 
            if (!isButtonClicked) { // التحقق من أنه لم يتم النقر على الزر بالفعل
                isButtonClicked = true; // تعيين المتغير للإشارة إلى النقر على الزر
                keycloak.login();
            }
        });

        keycloak.init({ onLoad: 'login-required' }).success((authenticated) => { 
            if (authenticated) { 
                alert("User is authenticated!"); 
            } else { 
                alert("User authentication failed!"); 
            } 
        }).error(() => { 
            alert("Could not authenticate the user!"); 
        });

        if (keycloak.hasRealmRole('admin')) { 
            alert("User is an admin!"); 
        }
    </script>
</body>
</html>
