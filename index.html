<!DOCTYPE html>
<html>
<head>
    <title>Keycloak Authentication</title>
    <script src="https://cdn.jsdelivr.net/npm/keycloak-js@16.1.0/dist/keycloak.js"></script>
</head>
<body>
    <h1>Keycloak Authentication</h1>
     
    <button id="login">Login with Keycloak</button>

    <script>
        const keycloak = Keycloak({ 
            url: 'http://localhost:8080', 
            realm: 'saml', 
            clientId: 'frontend', 
            redirectUri: 'https://lujainsallam1.github.io/saml', 
        });

        document.getElementById('login').addEventListener('click', () => {
            keycloak.login(); // توجيه المستخدم إلى صفحة تسجيل الدخول
        });

        keycloak.init({ onLoad: 'login-required' }).success((authenticated) => { 
            if (authenticated) { 
                const accessToken = keycloak.token; // الحصول على access token
                console.log(accessToken)
                alert("Access Token: " + accessToken);
            } else { 
                alert("User authentication failed!"); 
            } 
        }).error(() => { 
            alert("Could not authenticate the user!"); 
        });
    </script>
</body>
</html>
